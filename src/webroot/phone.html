<!doctype html>
<html>
    <head>
        <script src="/socket.io/socket.io.js"></script>
        <style>
            body {
                margin: 0;
            }

            #calibrateButton {
                position: absolute;
                width: 100%;
                height: 100%;
                border: none;
                text-align: center;
                font-size: 5em;
                background-color: black;
                color: #ffde3b;
            }
        </style>
    </head>
    <body>
        <button type="button" id="calibrateButton">
            Calibrate on flat surface
        </button>

        <script>
            var socket = io();

            window.addEventListener("deviceorientation", handleOrientation);

            function handleOrientation(event) {
                socket.emit("orientation", {
                    alpha: event.alpha,
                    beta: event.beta,
                    gamma: event.gamma,
                });
            }

            calibrateButton.addEventListener("click", handleCalibration);

            function handleCalibration(event) {
                socket.emit("calibrate");
                document.documentElement.requestFullscreen();
            }
        </script>
    </body>
</html>
